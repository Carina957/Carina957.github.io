import{_ as s,c as n,o as a,Q as o}from"./chunks/framework.1f7987bf.js";const l="/assets/github-actions-workflows.43d1d33f.png",p="/assets/yourself-workflows.9bf9932a.png",u=JSON.parse('{"title":"","description":"","frontmatter":{},"headers":[],"relativePath":"guide/deploy/github-actions.md"}'),e={name:"guide/deploy/github-actions.md"},t=o('<h2 id="push-to-the-branch-on-another-repo-on-github" tabindex="-1">Push to the branch on another repo on github <a class="header-anchor" href="#push-to-the-branch-on-another-repo-on-github" aria-label="Permalink to &quot;Push to the branch on another repo on github&quot;">​</a></h2><h3 id="new-workflows" tabindex="-1">New workflows <a class="header-anchor" href="#new-workflows" aria-label="Permalink to &quot;New workflows&quot;">​</a></h3><p>You can choice a workflows, also there are many templates to choose from, or you can set up a yourself workflows.</p><p>some demos:</p><p><img src="'+l+'" alt="github-actions-workflows"><img src="'+p+`" alt="yourself-workflows"></p><h3 id="github-actions-ssh-deploy-key" tabindex="-1">Github actions ssh deploy key <a class="header-anchor" href="#github-actions-ssh-deploy-key" aria-label="Permalink to &quot;Github actions ssh deploy key&quot;">​</a></h3><p><code>GitHub Actions</code> 是 GitHub 提供的自动化构建、测试和部署工具，它可以帮助开发者在代码提交后自动进行测试和部署。 如果需要在 <code>GitHub Actions</code> 中使用 <code>SSH</code> 部署密钥，可以按照以下步骤进行设置：</p><p><a href="https://docs.github.com/zh/authentication/connecting-to-github-with-ssh/generating-a-new-ssh-key-and-adding-it-to-the-ssh-agent" target="_blank" rel="noreferrer">生成 SSH 密钥</a>：在本地计算机上使用 ssh-keygen 命令生成 SSH 密钥对，公钥（id_ed22519.pub）和私钥（id_ed22519）。注意，私钥不应该被泄露，公钥需要被添加到目标服务器的 <a href="https://github.com/your_username/your_repo/settings/keys" target="_blank" rel="noreferrer">Deploy keys</a> 文件中。</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">ssh-keygen</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">-t</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">ed25519</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">-C</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">your_email@example.com</span><span style="color:#89DDFF;">&quot;</span></span></code></pre></div><p>添加 SSH 密钥到仓库 <a href="https://github.com/your_username/your_repo/settings/secrets/actions" target="_blank" rel="noreferrer">Secrets</a>：在 GitHub 仓库的 Settings 页面中，点击左侧导航栏的 Secrets，创建一个名为 DEPLOY_PRIVATE_KEY 的 Secret，并将私钥的内容复制到 Value 字段中。</p><p>配置 GitHub Actions：在 GitHub Actions 的工作流文件中，使用 actions/setup-ssh Action 将 SSH 密钥添加到工作环境中。例如，以下是一个使用 SSH 密钥部署的示例：</p><div class="language-yml"><button title="Copy Code" class="copy"></button><span class="lang">yml</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">Build &amp; Deploy</span></span>
<span class="line"><span style="color:#FF9CAC;">on</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">push</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#F07178;">branches</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;">[</span><span style="color:#C3E88D;">main</span><span style="color:#89DDFF;">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F07178;">jobs</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">  </span><span style="color:#F07178;">deploy</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">Deploy to Github Pages</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#F07178;">runs-on</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">ubuntu-latest</span></span>
<span class="line"><span style="color:#BABED8;">    </span><span style="color:#F07178;">steps</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#89DDFF;">-</span><span style="color:#BABED8;"> </span><span style="color:#F07178;">uses</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">actions/checkout@v3</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#89DDFF;">-</span><span style="color:#BABED8;"> </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">Setup Node.js</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#F07178;">uses</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">NullVoxPopuli/action-setup-pnpm@v2.3.0</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#F07178;">with</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">          </span><span style="color:#F07178;">no-lockfile</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#FF9CAC;">true</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#89DDFF;">-</span><span style="color:#BABED8;"> </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">pnpm install, build</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#F07178;">run</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#89DDFF;font-style:italic;">|</span></span>
<span class="line"><span style="color:#C3E88D;">          pnpm install</span></span>
<span class="line"><span style="color:#C3E88D;">          pnpm run build</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">      </span><span style="color:#676E95;font-style:italic;"># demo</span></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#89DDFF;">-</span><span style="color:#BABED8;"> </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">Deploy</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#F07178;">uses</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">easingthemes/ssh-deploy@v2.2.1</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#F07178;">env</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">          </span><span style="color:#F07178;">SSH_PRIVATE_KEY</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">\${{ secrets.DEPLOY_PRIVATE_KEY }}</span></span>
<span class="line"><span style="color:#BABED8;">          </span><span style="color:#F07178;">ARGS</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">-rltgoDzvO --delete</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#F07178;">with</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">          </span><span style="color:#F07178;">server</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">user@server.com</span></span>
<span class="line"><span style="color:#BABED8;">          </span><span style="color:#F07178;">port</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#F78C6C;">22</span></span>
<span class="line"><span style="color:#BABED8;">          </span><span style="color:#F07178;">source</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">path/to/local/files</span></span>
<span class="line"><span style="color:#BABED8;">          </span><span style="color:#F07178;">dest</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">/path/to/remote/files</span></span>
<span class="line"></span>
<span class="line"><span style="color:#BABED8;">      </span><span style="color:#89DDFF;">-</span><span style="color:#BABED8;"> </span><span style="color:#F07178;">name</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">Deploy to another repository</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#F07178;">uses</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">s0/git-publish-subdir-action@develop</span></span>
<span class="line"><span style="color:#BABED8;">        </span><span style="color:#F07178;">env</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#BABED8;">          </span><span style="color:#F07178;">REPO</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">git@github.com:Carina957/Carina957.github.io.git</span></span>
<span class="line"><span style="color:#BABED8;">          </span><span style="color:#F07178;">BRANCH</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">main</span></span>
<span class="line"><span style="color:#BABED8;">          </span><span style="color:#F07178;">FOLDER</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">docs/.vitepress/dist</span></span>
<span class="line"><span style="color:#BABED8;">          </span><span style="color:#F07178;">SSH_PRIVATE_KEY</span><span style="color:#89DDFF;">:</span><span style="color:#BABED8;"> </span><span style="color:#C3E88D;">\${{secrets.DEPLOY_PRIVATE_KEY}}</span></span></code></pre></div><h3 id="other-recommended-repo" tabindex="-1">Other recommended repo <a class="header-anchor" href="#other-recommended-repo" aria-label="Permalink to &quot;Other recommended repo&quot;">​</a></h3><ul><li><a href="https://github.com/marketplace/actions/push-git-subdirectory-as-branch" target="_blank" rel="noreferrer">push-git-subdirectory-as-branch</a></li><li><a href="https://github.com/marketplace/actions/push-a-file-to-another-repository" target="_blank" rel="noreferrer">push-a-file-to-another-repository</a></li><li><a href="https://github.com/cpina/github-action-push-to-another-repository" target="_blank" rel="noreferrer">github-action-push-to-another-repository</a></li></ul>`,14),r=[t];function c(y,i,D,B,h,F){return a(),n("div",null,r)}const d=s(e,[["render",c]]);export{u as __pageData,d as default};
